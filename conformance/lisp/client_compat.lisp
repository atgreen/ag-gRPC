;;;; Generated from proto/connectrpc/conformance/v1/client_compat.proto

;;;; Generated by ag-proto-cli v1.0.0-g23253a3+dirty

(in-package "CONFORMANCE-PROTO")


(DEFCLASS CONFORMANCE-PROTO::CLIENT-COMPAT-REQUEST (AG-PROTO:PROTO-MESSAGE)
          ((TEST-NAME :INITARG :TEST-NAME :ACCESSOR
            CONFORMANCE-PROTO::TEST-NAME :INITFORM "" :TYPE STRING)
           (HTTP-VERSION :INITARG :HTTP-VERSION :ACCESSOR
            CONFORMANCE-PROTO::HTTP-VERSION :INITFORM NIL :TYPE T)
           (PROTOCOL :INITARG :PROTOCOL :ACCESSOR CONFORMANCE-PROTO::PROTOCOL
            :INITFORM NIL :TYPE T)
           (CODEC :INITARG :CODEC :ACCESSOR CONFORMANCE-PROTO::CODEC :INITFORM
            NIL :TYPE T)
           (COMPRESSION :INITARG :COMPRESSION :ACCESSOR
            CONFORMANCE-PROTO::COMPRESSION :INITFORM NIL :TYPE T)
           (HOST :INITARG :HOST :ACCESSOR CONFORMANCE-PROTO::HOST :INITFORM ""
            :TYPE STRING)
           (PORT :INITARG :PORT :ACCESSOR CONFORMANCE-PROTO::PORT :INITFORM 0
            :TYPE (UNSIGNED-BYTE 32))
           (SERVER-TLS-CERT :INITARG :SERVER-TLS-CERT :ACCESSOR
            CONFORMANCE-PROTO::SERVER-TLS-CERT :INITFORM
            (MAKE-ARRAY 0 :ELEMENT-TYPE '(UNSIGNED-BYTE 8)) :TYPE
            (VECTOR (UNSIGNED-BYTE 8)))
           (CLIENT-TLS-CREDS :INITARG :CLIENT-TLS-CREDS :ACCESSOR
            CONFORMANCE-PROTO::CLIENT-TLS-CREDS :INITFORM NIL :TYPE T)
           (MESSAGE-RECEIVE-LIMIT :INITARG :MESSAGE-RECEIVE-LIMIT :ACCESSOR
            CONFORMANCE-PROTO::MESSAGE-RECEIVE-LIMIT :INITFORM 0 :TYPE
            (UNSIGNED-BYTE 32))
           (SERVICE :INITARG :SERVICE :ACCESSOR CONFORMANCE-PROTO::SERVICE
            :INITFORM "" :TYPE STRING)
           (PROTO-METHOD :INITARG :METHOD :ACCESSOR
            CONFORMANCE-PROTO::PROTO-METHOD :INITFORM "" :TYPE STRING)
           (STREAM-TYPE :INITARG :STREAM-TYPE :ACCESSOR
            CONFORMANCE-PROTO::STREAM-TYPE :INITFORM NIL :TYPE T)
           (USE-GET-HTTP-METHOD :INITARG :USE-GET-HTTP-METHOD :ACCESSOR
            CONFORMANCE-PROTO::USE-GET-HTTP-METHOD :INITFORM NIL :TYPE BOOLEAN)
           (REQUEST-HEADERS :INITARG :REQUEST-HEADERS :ACCESSOR
            CONFORMANCE-PROTO::REQUEST-HEADERS :INITFORM NIL :TYPE LIST)
           (REQUEST-MESSAGES :INITARG :REQUEST-MESSAGES :ACCESSOR
            CONFORMANCE-PROTO::REQUEST-MESSAGES :INITFORM NIL :TYPE LIST)
           (TIMEOUT-MS :INITARG :TIMEOUT-MS :ACCESSOR
            CONFORMANCE-PROTO::TIMEOUT-MS :INITFORM 0 :TYPE (UNSIGNED-BYTE 32))
           (REQUEST-DELAY-MS :INITARG :REQUEST-DELAY-MS :ACCESSOR
            CONFORMANCE-PROTO::REQUEST-DELAY-MS :INITFORM 0 :TYPE
            (UNSIGNED-BYTE 32))
           (CANCEL :INITARG :CANCEL :ACCESSOR CONFORMANCE-PROTO::CANCEL
            :INITFORM NIL :TYPE T)
           (RAW-REQUEST :INITARG :RAW-REQUEST :ACCESSOR
            CONFORMANCE-PROTO::RAW-REQUEST :INITFORM NIL :TYPE T))
          (:DOCUMENTATION "Proto message: ClientCompatRequest"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::CLIENT-COMPAT-REQUEST))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'TEST-NAME)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'HTTP-VERSION)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 2 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PROTOCOL)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 3 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'CODEC)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 4 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'COMPRESSION)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 5 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'HOST)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 6 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PORT)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 7 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'SERVER-TLS-CERT)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 8 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'CLIENT-TLS-CREDS)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 9 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'MESSAGE-RECEIVE-LIMIT)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 10 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'SERVICE)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 11 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PROTO-METHOD)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 12 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'STREAM-TYPE)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 13 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'USE-GET-HTTP-METHOD)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 14 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT
         (IF AG-PROTO::VALUE
             1
             0)
         AG-PROTO::BUFFER)))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-HEADERS))
      (AG-PROTO::WRITE-FIELD-TAG 15 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-MESSAGES))
      (AG-PROTO::WRITE-FIELD-TAG 16 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'TIMEOUT-MS)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 17 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-DELAY-MS)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 18 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'CANCEL)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 19 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'RAW-REQUEST)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 20 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::CLIENT-COMPAT-REQUEST))
            AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ
         (MAKE-INSTANCE 'CONFORMANCE-PROTO::CLIENT-COMPAT-REQUEST))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'TEST-NAME)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (2
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'HTTP-VERSION)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (3
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTOCOL)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (4
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'CODEC)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (5
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'COMPRESSION)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (6
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'HOST)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (7
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PORT)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (8
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'SERVER-TLS-CERT)
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                 (9
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'CLIENT-TLS-CREDS)
                          (LET ((AG-PROTO::DATA
                                 (AG-PROTO::READ-LENGTH-DELIMITED
                                  AG-PROTO::BUFFER)))
                            (AG-PROTO:DESERIALIZE-FROM-BYTES 'TLS-CREDS
                                                             AG-PROTO::DATA))))
                 (10
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'MESSAGE-RECEIVE-LIMIT)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (11
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'SERVICE)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (12
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTO-METHOD)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (13
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'STREAM-TYPE)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (14
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'USE-GET-HTTP-METHOD)
                          (NOT
                           (ZEROP (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))))
                 (15
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'HEADER AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-HEADERS)))
                 (16
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'ANY AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-MESSAGES)))
                 (17
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'TIMEOUT-MS)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (18
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-DELAY-MS)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (19
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'CANCEL)
                          (LET ((AG-PROTO::DATA
                                 (AG-PROTO::READ-LENGTH-DELIMITED
                                  AG-PROTO::BUFFER)))
                            (AG-PROTO:DESERIALIZE-FROM-BYTES 'CANCEL
                                                             AG-PROTO::DATA))))
                 (20
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'RAW-REQUEST)
                          (LET ((AG-PROTO::DATA
                                 (AG-PROTO::READ-LENGTH-DELIMITED
                                  AG-PROTO::BUFFER)))
                            (AG-PROTO:DESERIALIZE-FROM-BYTES 'RAW-HTTP-REQUEST
                                                             AG-PROTO::DATA))))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-HEADERS)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-HEADERS)))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-MESSAGES)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'REQUEST-MESSAGES)))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::CANCEL (AG-PROTO:PROTO-MESSAGE)
          ((BEFORE-CLOSE-SEND :INITARG :BEFORE-CLOSE-SEND :ACCESSOR
            CONFORMANCE-PROTO::BEFORE-CLOSE-SEND :INITFORM NIL :TYPE T)
           (AFTER-CLOSE-SEND-MS :INITARG :AFTER-CLOSE-SEND-MS :ACCESSOR
            CONFORMANCE-PROTO::AFTER-CLOSE-SEND-MS :INITFORM 0 :TYPE
            (UNSIGNED-BYTE 32))
           (AFTER-NUM-RESPONSES :INITARG :AFTER-NUM-RESPONSES :ACCESSOR
            CONFORMANCE-PROTO::AFTER-NUM-RESPONSES :INITFORM 0 :TYPE
            (UNSIGNED-BYTE 32))
           (CONFORMANCE-PROTO::CANCEL-TIMING-CASE :INITFORM NIL :ACCESSOR
            CONFORMANCE-PROTO::CANCEL-TIMING-CASE :DOCUMENTATION
            "Which cancel_timing variant is set (field name keyword or nil)"))
          (:DOCUMENTATION "Proto message: Cancel"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::CANCEL))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (WHEN
        (EQ (SLOT-VALUE AG-PROTO::OBJ 'CANCEL-TIMING-CASE) :BEFORE-CLOSE-SEND)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'BEFORE-CLOSE-SEND)))
        (WHEN AG-PROTO::VALUE
          (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-LENGTH-DELIMITED
           (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    (WHEN
        (EQ (SLOT-VALUE AG-PROTO::OBJ 'CANCEL-TIMING-CASE)
            :AFTER-CLOSE-SEND-MS)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'AFTER-CLOSE-SEND-MS)))
        (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
          (AG-PROTO::WRITE-FIELD-TAG 2 0 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER))))
    (WHEN
        (EQ (SLOT-VALUE AG-PROTO::OBJ 'CANCEL-TIMING-CASE)
            :AFTER-NUM-RESPONSES)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'AFTER-NUM-RESPONSES)))
        (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
          (AG-PROTO::WRITE-FIELD-TAG 3 0 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER))))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::CANCEL)) AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::CANCEL))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'AFTER-CLOSE-SEND-MS) 0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'AFTER-NUM-RESPONSES) 0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BEFORE-CLOSE-SEND)
                           (LET ((AG-PROTO::DATA
                                  (AG-PROTO::READ-LENGTH-DELIMITED
                                   AG-PROTO::BUFFER)))
                             (AG-PROTO:DESERIALIZE-FROM-BYTES 'EMPTY
                                                              AG-PROTO::DATA)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'CANCEL-TIMING-CASE)
                           :BEFORE-CLOSE-SEND)))
                 (2
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BEFORE-CLOSE-SEND) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'AFTER-NUM-RESPONSES) 0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'AFTER-CLOSE-SEND-MS)
                           (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'CANCEL-TIMING-CASE)
                           :AFTER-CLOSE-SEND-MS)))
                 (3
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BEFORE-CLOSE-SEND) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'AFTER-CLOSE-SEND-MS) 0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'AFTER-NUM-RESPONSES)
                           (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'CANCEL-TIMING-CASE)
                           :AFTER-NUM-RESPONSES)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::CLIENT-COMPAT-RESPONSE (AG-PROTO:PROTO-MESSAGE)
          ((TEST-NAME :INITARG :TEST-NAME :ACCESSOR
            CONFORMANCE-PROTO::TEST-NAME :INITFORM "" :TYPE STRING)
           (RESPONSE :INITARG :RESPONSE :ACCESSOR CONFORMANCE-PROTO::RESPONSE
            :INITFORM NIL :TYPE T)
           (PROTO-ERROR :INITARG :ERROR :ACCESSOR
            CONFORMANCE-PROTO::PROTO-ERROR :INITFORM NIL :TYPE T)
           (CONFORMANCE-PROTO::RESULT-CASE :INITFORM NIL :ACCESSOR
            CONFORMANCE-PROTO::RESULT-CASE :DOCUMENTATION
            "Which result variant is set (field name keyword or nil)"))
          (:DOCUMENTATION "Proto message: ClientCompatResponse"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::CLIENT-COMPAT-RESPONSE))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'TEST-NAME)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'RESULT-CASE) :RESPONSE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE)))
        (WHEN AG-PROTO::VALUE
          (AG-PROTO::WRITE-FIELD-TAG 2 2 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-LENGTH-DELIMITED
           (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'RESULT-CASE) :ERROR)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PROTO-ERROR)))
        (WHEN AG-PROTO::VALUE
          (AG-PROTO::WRITE-FIELD-TAG 3 2 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-LENGTH-DELIMITED
           (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::CLIENT-COMPAT-RESPONSE))
            AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ
         (MAKE-INSTANCE 'CONFORMANCE-PROTO::CLIENT-COMPAT-RESPONSE))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'TEST-NAME)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (2
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTO-ERROR) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE)
                           (LET ((AG-PROTO::DATA
                                  (AG-PROTO::READ-LENGTH-DELIMITED
                                   AG-PROTO::BUFFER)))
                             (AG-PROTO:DESERIALIZE-FROM-BYTES
                              'CLIENT-RESPONSE-RESULT AG-PROTO::DATA)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'RESULT-CASE) :RESPONSE)))
                 (3
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTO-ERROR)
                           (LET ((AG-PROTO::DATA
                                  (AG-PROTO::READ-LENGTH-DELIMITED
                                   AG-PROTO::BUFFER)))
                             (AG-PROTO:DESERIALIZE-FROM-BYTES
                              'CLIENT-ERROR-RESULT AG-PROTO::DATA)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'RESULT-CASE) :ERROR)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::CLIENT-RESPONSE-RESULT (AG-PROTO:PROTO-MESSAGE)
          ((RESPONSE-HEADERS :INITARG :RESPONSE-HEADERS :ACCESSOR
            CONFORMANCE-PROTO::RESPONSE-HEADERS :INITFORM NIL :TYPE LIST)
           (PAYLOADS :INITARG :PAYLOADS :ACCESSOR CONFORMANCE-PROTO::PAYLOADS
            :INITFORM NIL :TYPE LIST)
           (PROTO-ERROR :INITARG :ERROR :ACCESSOR
            CONFORMANCE-PROTO::PROTO-ERROR :INITFORM NIL :TYPE T)
           (RESPONSE-TRAILERS :INITARG :RESPONSE-TRAILERS :ACCESSOR
            CONFORMANCE-PROTO::RESPONSE-TRAILERS :INITFORM NIL :TYPE LIST)
           (NUM-UNSENT-REQUESTS :INITARG :NUM-UNSENT-REQUESTS :ACCESSOR
            CONFORMANCE-PROTO::NUM-UNSENT-REQUESTS :INITFORM 0 :TYPE
            (SIGNED-BYTE 32))
           (HTTP-STATUS-CODE :INITARG :HTTP-STATUS-CODE :ACCESSOR
            CONFORMANCE-PROTO::HTTP-STATUS-CODE :INITFORM 0 :TYPE
            (SIGNED-BYTE 32))
           (FEEDBACK :INITARG :FEEDBACK :ACCESSOR CONFORMANCE-PROTO::FEEDBACK
            :INITFORM NIL :TYPE LIST))
          (:DOCUMENTATION "Proto message: ClientResponseResult"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::CLIENT-RESPONSE-RESULT))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-HEADERS))
      (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'PAYLOADS))
      (AG-PROTO::WRITE-FIELD-TAG 2 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PROTO-ERROR)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 3 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-TRAILERS))
      (AG-PROTO::WRITE-FIELD-TAG 4 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'NUM-UNSENT-REQUESTS)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 5 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'HTTP-STATUS-CODE)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 6 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'FEEDBACK))
      (AG-PROTO::WRITE-FIELD-TAG 7 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO::STRING-TO-UTF8 AG-PROTO::ELEM) AG-PROTO::BUFFER))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::CLIENT-RESPONSE-RESULT))
            AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ
         (MAKE-INSTANCE 'CONFORMANCE-PROTO::CLIENT-RESPONSE-RESULT))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'HEADER AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-HEADERS)))
                 (2
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'CONFORMANCE-PAYLOAD
                                                      AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'PAYLOADS)))
                 (3
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTO-ERROR)
                          (LET ((AG-PROTO::DATA
                                 (AG-PROTO::READ-LENGTH-DELIMITED
                                  AG-PROTO::BUFFER)))
                            (AG-PROTO:DESERIALIZE-FROM-BYTES 'PROTO-ERROR
                                                             AG-PROTO::DATA))))
                 (4
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'HEADER AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-TRAILERS)))
                 (5
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUM-UNSENT-REQUESTS)
                          (LET ((AG-PROTO::N
                                 (LOGAND
                                  (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)
                                  4294967295)))
                            (IF (>= AG-PROTO::N 2147483648)
                                (- AG-PROTO::N 4294967296)
                                AG-PROTO::N))))
                 (6
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'HTTP-STATUS-CODE)
                          (LET ((AG-PROTO::N
                                 (LOGAND
                                  (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)
                                  4294967295)))
                            (IF (>= AG-PROTO::N 2147483648)
                                (- AG-PROTO::N 4294967296)
                                AG-PROTO::N))))
                 (7
                  (PUSH
                   (AG-PROTO::UTF8-TO-STRING
                    (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER))
                   (SLOT-VALUE AG-PROTO::OBJ 'FEEDBACK)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-HEADERS)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-HEADERS)))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'PAYLOADS)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'PAYLOADS)))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-TRAILERS)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'RESPONSE-TRAILERS)))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'FEEDBACK)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'FEEDBACK)))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::CLIENT-ERROR-RESULT (AG-PROTO:PROTO-MESSAGE)
          ((MESSAGE :INITARG :MESSAGE :ACCESSOR CONFORMANCE-PROTO::MESSAGE
            :INITFORM "" :TYPE STRING))
          (:DOCUMENTATION "Proto message: ClientErrorResult"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::CLIENT-ERROR-RESULT))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'MESSAGE)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::CLIENT-ERROR-RESULT))
            AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::CLIENT-ERROR-RESULT))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'MESSAGE)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::WIRE-DETAILS (AG-PROTO:PROTO-MESSAGE)
          ((ACTUAL-STATUS-CODE :INITARG :ACTUAL-STATUS-CODE :ACCESSOR
            CONFORMANCE-PROTO::ACTUAL-STATUS-CODE :INITFORM 0 :TYPE
            (SIGNED-BYTE 32))
           (CONNECT-ERROR-RAW :INITARG :CONNECT-ERROR-RAW :ACCESSOR
            CONFORMANCE-PROTO::CONNECT-ERROR-RAW :INITFORM NIL :TYPE T)
           (ACTUAL-HTTP-TRAILERS :INITARG :ACTUAL-HTTP-TRAILERS :ACCESSOR
            CONFORMANCE-PROTO::ACTUAL-HTTP-TRAILERS :INITFORM NIL :TYPE LIST)
           (ACTUAL-GRPCWEB-TRAILERS :INITARG :ACTUAL-GRPCWEB-TRAILERS :ACCESSOR
            CONFORMANCE-PROTO::ACTUAL-GRPCWEB-TRAILERS :INITFORM "" :TYPE
            STRING))
          (:DOCUMENTATION "Proto message: WireDetails"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::WIRE-DETAILS))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-STATUS-CODE)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 1 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'CONNECT-ERROR-RAW)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 2 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-HTTP-TRAILERS))
      (AG-PROTO::WRITE-FIELD-TAG 3 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-GRPCWEB-TRAILERS)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 4 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::WIRE-DETAILS)) AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::WIRE-DETAILS))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-STATUS-CODE)
                          (LET ((AG-PROTO::N
                                 (LOGAND
                                  (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)
                                  4294967295)))
                            (IF (>= AG-PROTO::N 2147483648)
                                (- AG-PROTO::N 4294967296)
                                AG-PROTO::N))))
                 (2
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'CONNECT-ERROR-RAW)
                          (LET ((AG-PROTO::DATA
                                 (AG-PROTO::READ-LENGTH-DELIMITED
                                  AG-PROTO::BUFFER)))
                            (AG-PROTO:DESERIALIZE-FROM-BYTES 'PROTO-STRUCT
                                                             AG-PROTO::DATA))))
                 (3
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'HEADER AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-HTTP-TRAILERS)))
                 (4
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-GRPCWEB-TRAILERS)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-HTTP-TRAILERS)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'ACTUAL-HTTP-TRAILERS)))
    AG-PROTO::OBJ))

