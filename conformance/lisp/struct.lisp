;;;; Generated from proto/google/protobuf/struct.proto

;;;; Generated by ag-proto-cli v1.0.0-g23253a3+dirty

(in-package "CONFORMANCE-PROTO")


(PROGN (DEFCONSTANT CONFORMANCE-PROTO::+NULLVALUE-NULL_VALUE+ 0))


(DEFCLASS CONFORMANCE-PROTO::STRUCT (AG-PROTO:PROTO-MESSAGE) NIL
          (:DOCUMENTATION "Proto message: Struct"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::STRUCT))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::STRUCT)) AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::STRUCT))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::VALUE (AG-PROTO:PROTO-MESSAGE)
          ((NULL-VALUE :INITARG :NULL-VALUE :ACCESSOR
            CONFORMANCE-PROTO::NULL-VALUE :INITFORM NIL :TYPE T)
           (NUMBER-VALUE :INITARG :NUMBER-VALUE :ACCESSOR
            CONFORMANCE-PROTO::NUMBER-VALUE :INITFORM 0.0d0 :TYPE DOUBLE-FLOAT)
           (STRING-VALUE :INITARG :STRING-VALUE :ACCESSOR
            CONFORMANCE-PROTO::STRING-VALUE :INITFORM "" :TYPE STRING)
           (BOOL-VALUE :INITARG :BOOL-VALUE :ACCESSOR
            CONFORMANCE-PROTO::BOOL-VALUE :INITFORM NIL :TYPE BOOLEAN)
           (STRUCT-VALUE :INITARG :STRUCT-VALUE :ACCESSOR
            CONFORMANCE-PROTO::STRUCT-VALUE :INITFORM NIL :TYPE T)
           (LIST-VALUE :INITARG :LIST-VALUE :ACCESSOR
            CONFORMANCE-PROTO::LIST-VALUE :INITFORM NIL :TYPE T)
           (CONFORMANCE-PROTO::KIND-CASE :INITFORM NIL :ACCESSOR
            CONFORMANCE-PROTO::KIND-CASE :DOCUMENTATION
            "Which kind variant is set (field name keyword or nil)"))
          (:DOCUMENTATION "Proto message: Value"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::VALUE))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :NULL-VALUE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE)))
        (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
          (AG-PROTO::WRITE-FIELD-TAG 1 0 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER))))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :NUMBER-VALUE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE)))
        (WHEN (AND AG-PROTO::VALUE (NOT (ZEROP AG-PROTO::VALUE)))
          (AG-PROTO::WRITE-FIELD-TAG 2 1 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-FIXED64
           (AG-PROTO::FLOAT-TO-IEEE754-64 AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :STRING-VALUE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE)))
        (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
          (AG-PROTO::WRITE-FIELD-TAG 3 2 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-LENGTH-DELIMITED
           (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :BOOL-VALUE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE)))
        (WHEN AG-PROTO::VALUE
          (AG-PROTO::WRITE-FIELD-TAG 4 0 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-VARINT
           (IF AG-PROTO::VALUE
               1
               0)
           AG-PROTO::BUFFER))))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :STRUCT-VALUE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE)))
        (WHEN AG-PROTO::VALUE
          (AG-PROTO::WRITE-FIELD-TAG 5 2 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-LENGTH-DELIMITED
           (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    (WHEN (EQ (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :LIST-VALUE)
      (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE)))
        (WHEN AG-PROTO::VALUE
          (AG-PROTO::WRITE-FIELD-TAG 6 2 AG-PROTO::BUFFER)
          (AG-PROTO::WRITE-LENGTH-DELIMITED
           (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER))))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::VALUE)) AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::VALUE))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE) 0.0d0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE) "")
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE)
                           (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :NULL-VALUE)))
                 (2
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE) "")
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE)
                           (AG-PROTO::IEEE754-64-TO-FLOAT
                            (AG-PROTO::READ-FIXED64 AG-PROTO::BUFFER)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :NUMBER-VALUE)))
                 (3
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE) 0.0d0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE)
                           (AG-PROTO::UTF8-TO-STRING
                            (AG-PROTO::READ-LENGTH-DELIMITED
                             AG-PROTO::BUFFER)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :STRING-VALUE)))
                 (4
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE) 0.0d0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE) "")
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE)
                           (NOT
                            (ZEROP (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :BOOL-VALUE)))
                 (5
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE) 0.0d0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE) "")
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE)
                           (LET ((AG-PROTO::DATA
                                  (AG-PROTO::READ-LENGTH-DELIMITED
                                   AG-PROTO::BUFFER)))
                             (AG-PROTO:DESERIALIZE-FROM-BYTES 'STRUCT
                                                              AG-PROTO::DATA)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :STRUCT-VALUE)))
                 (6
                  (PROGN
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NULL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'NUMBER-VALUE) 0.0d0)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRING-VALUE) "")
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'BOOL-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'STRUCT-VALUE) NIL)
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'LIST-VALUE)
                           (LET ((AG-PROTO::DATA
                                  (AG-PROTO::READ-LENGTH-DELIMITED
                                   AG-PROTO::BUFFER)))
                             (AG-PROTO:DESERIALIZE-FROM-BYTES 'LIST-VALUE
                                                              AG-PROTO::DATA)))
                   (SETF (SLOT-VALUE AG-PROTO::OBJ 'KIND-CASE) :LIST-VALUE)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::LIST-VALUE (AG-PROTO:PROTO-MESSAGE)
          ((PROTO-VALUES :INITARG :VALUES :ACCESSOR
            CONFORMANCE-PROTO::PROTO-VALUES :INITFORM NIL :TYPE LIST))
          (:DOCUMENTATION "Proto message: ListValue"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::LIST-VALUE))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (DOLIST (AG-PROTO::ELEM (SLOT-VALUE AG-PROTO::OBJ 'PROTO-VALUES))
      (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
      (AG-PROTO::WRITE-LENGTH-DELIMITED
       (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::ELEM) AG-PROTO::BUFFER))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::LIST-VALUE)) AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::LIST-VALUE))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (PUSH
                   (LET ((AG-PROTO::DATA
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                     (AG-PROTO:DESERIALIZE-FROM-BYTES 'VALUE AG-PROTO::DATA))
                   (SLOT-VALUE AG-PROTO::OBJ 'PROTO-VALUES)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTO-VALUES)
            (NREVERSE (SLOT-VALUE AG-PROTO::OBJ 'PROTO-VALUES)))
    AG-PROTO::OBJ))

