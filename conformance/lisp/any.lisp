;;;; Generated from proto/google/protobuf/any.proto

;;;; Generated by ag-proto-cli v1.0.0-g23253a3+dirty

(in-package "CONFORMANCE-PROTO")


(DEFCLASS CONFORMANCE-PROTO::ANY (AG-PROTO:PROTO-MESSAGE)
          ((TYPE-URL :INITARG :TYPE-URL :ACCESSOR CONFORMANCE-PROTO::TYPE-URL
            :INITFORM "" :TYPE STRING)
           (VALUE :INITARG :VALUE :ACCESSOR CONFORMANCE-PROTO::VALUE :INITFORM
            (MAKE-ARRAY 0 :ELEMENT-TYPE '(UNSIGNED-BYTE 8)) :TYPE
            (VECTOR (UNSIGNED-BYTE 8))))
          (:DOCUMENTATION "Proto message: Any"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES ((AG-PROTO::OBJ CONFORMANCE-PROTO::ANY))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'TYPE-URL)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'VALUE)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 2 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED AG-PROTO::VALUE AG-PROTO::BUFFER)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::ANY)) AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ (MAKE-INSTANCE 'CONFORMANCE-PROTO::ANY))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'TYPE-URL)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (2
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'VALUE)
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))

