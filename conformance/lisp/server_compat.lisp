;;;; Generated from proto/connectrpc/conformance/v1/server_compat.proto

;;;; Generated by ag-proto-cli v1.0.0-g23253a3+dirty

(in-package "CONFORMANCE-PROTO")


(DEFCLASS CONFORMANCE-PROTO::SERVER-COMPAT-REQUEST (AG-PROTO:PROTO-MESSAGE)
          ((PROTOCOL :INITARG :PROTOCOL :ACCESSOR CONFORMANCE-PROTO::PROTOCOL
            :INITFORM NIL :TYPE T)
           (HTTP-VERSION :INITARG :HTTP-VERSION :ACCESSOR
            CONFORMANCE-PROTO::HTTP-VERSION :INITFORM NIL :TYPE T)
           (USE-TLS :INITARG :USE-TLS :ACCESSOR CONFORMANCE-PROTO::USE-TLS
            :INITFORM NIL :TYPE BOOLEAN)
           (CLIENT-TLS-CERT :INITARG :CLIENT-TLS-CERT :ACCESSOR
            CONFORMANCE-PROTO::CLIENT-TLS-CERT :INITFORM
            (MAKE-ARRAY 0 :ELEMENT-TYPE '(UNSIGNED-BYTE 8)) :TYPE
            (VECTOR (UNSIGNED-BYTE 8)))
           (MESSAGE-RECEIVE-LIMIT :INITARG :MESSAGE-RECEIVE-LIMIT :ACCESSOR
            CONFORMANCE-PROTO::MESSAGE-RECEIVE-LIMIT :INITFORM 0 :TYPE
            (UNSIGNED-BYTE 32))
           (SERVER-CREDS :INITARG :SERVER-CREDS :ACCESSOR
            CONFORMANCE-PROTO::SERVER-CREDS :INITFORM NIL :TYPE T))
          (:DOCUMENTATION "Proto message: ServerCompatRequest"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::SERVER-COMPAT-REQUEST))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PROTOCOL)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 1 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'HTTP-VERSION)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 2 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'USE-TLS)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 4 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT
         (IF AG-PROTO::VALUE
             1
             0)
         AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'CLIENT-TLS-CERT)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 5 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'MESSAGE-RECEIVE-LIMIT)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 6 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'SERVER-CREDS)))
      (WHEN AG-PROTO::VALUE
        (AG-PROTO::WRITE-FIELD-TAG 7 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO:SERIALIZE-TO-BYTES AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::SERVER-COMPAT-REQUEST))
            AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ
         (MAKE-INSTANCE 'CONFORMANCE-PROTO::SERVER-COMPAT-REQUEST))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PROTOCOL)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (2
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'HTTP-VERSION)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (4
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'USE-TLS)
                          (NOT
                           (ZEROP (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))))
                 (5
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'CLIENT-TLS-CERT)
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                 (6
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'MESSAGE-RECEIVE-LIMIT)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (7
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'SERVER-CREDS)
                          (LET ((AG-PROTO::DATA
                                 (AG-PROTO::READ-LENGTH-DELIMITED
                                  AG-PROTO::BUFFER)))
                            (AG-PROTO:DESERIALIZE-FROM-BYTES 'TLS-CREDS
                                                             AG-PROTO::DATA))))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))


(DEFCLASS CONFORMANCE-PROTO::SERVER-COMPAT-RESPONSE (AG-PROTO:PROTO-MESSAGE)
          ((HOST :INITARG :HOST :ACCESSOR CONFORMANCE-PROTO::HOST :INITFORM ""
            :TYPE STRING)
           (PORT :INITARG :PORT :ACCESSOR CONFORMANCE-PROTO::PORT :INITFORM 0
            :TYPE (UNSIGNED-BYTE 32))
           (PEM-CERT :INITARG :PEM-CERT :ACCESSOR CONFORMANCE-PROTO::PEM-CERT
            :INITFORM (MAKE-ARRAY 0 :ELEMENT-TYPE '(UNSIGNED-BYTE 8)) :TYPE
            (VECTOR (UNSIGNED-BYTE 8))))
          (:DOCUMENTATION "Proto message: ServerCompatResponse"))


(DEFMETHOD AG-PROTO:SERIALIZE-TO-BYTES
           ((AG-PROTO::OBJ CONFORMANCE-PROTO::SERVER-COMPAT-RESPONSE))
  (LET ((AG-PROTO::BUFFER
         (MAKE-ARRAY 64 :ELEMENT-TYPE '(UNSIGNED-BYTE 8) :FILL-POINTER 0
                     :ADJUSTABLE T)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'HOST)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 1 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED
         (AG-PROTO::STRING-TO-UTF8 AG-PROTO::VALUE) AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PORT)))
      (WHEN (AND AG-PROTO::VALUE (NOT (EQL AG-PROTO::VALUE 0)))
        (AG-PROTO::WRITE-FIELD-TAG 2 0 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-VARINT AG-PROTO::VALUE AG-PROTO::BUFFER)))
    (LET ((AG-PROTO::VALUE (SLOT-VALUE AG-PROTO::OBJ 'PEM-CERT)))
      (WHEN (AND AG-PROTO::VALUE (PLUSP (LENGTH AG-PROTO::VALUE)))
        (AG-PROTO::WRITE-FIELD-TAG 3 2 AG-PROTO::BUFFER)
        (AG-PROTO::WRITE-LENGTH-DELIMITED AG-PROTO::VALUE AG-PROTO::BUFFER)))
    AG-PROTO::BUFFER))


(DEFMETHOD AG-PROTO:DESERIALIZE-FROM-BYTES
           ((TYPE (EQL 'CONFORMANCE-PROTO::SERVER-COMPAT-RESPONSE))
            AG-PROTO::DATA)
  (LET ((AG-PROTO::OBJ
         (MAKE-INSTANCE 'CONFORMANCE-PROTO::SERVER-COMPAT-RESPONSE))
        (AG-PROTO::BUFFER (CONS AG-PROTO::DATA 0)))
    (LOOP AG-PROTO::WHILE (< (CDR AG-PROTO::BUFFER) (LENGTH AG-PROTO::DATA))
          DO (LET* ((AG-PROTO::TAG (AG-PROTO::READ-VARINT AG-PROTO::BUFFER))
                    (AG-PROTO::FIELD-NUMBER (ASH AG-PROTO::TAG -3))
                    (AG-PROTO::WIRE-TYPE (LOGAND AG-PROTO::TAG 7)))
               (CASE AG-PROTO::FIELD-NUMBER
                 (1
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'HOST)
                          (AG-PROTO::UTF8-TO-STRING
                           (AG-PROTO::READ-LENGTH-DELIMITED
                            AG-PROTO::BUFFER))))
                 (2
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PORT)
                          (AG-PROTO::READ-VARINT AG-PROTO::BUFFER)))
                 (3
                  (SETF (SLOT-VALUE AG-PROTO::OBJ 'PEM-CERT)
                          (AG-PROTO::READ-LENGTH-DELIMITED AG-PROTO::BUFFER)))
                 (OTHERWISE
                  (AG-PROTO::SKIP-FIELD AG-PROTO::BUFFER
                                        AG-PROTO::WIRE-TYPE)))))
    AG-PROTO::OBJ))

